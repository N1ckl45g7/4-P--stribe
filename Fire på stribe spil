
def brik_placering(board_state, col): #Tjekker hvilken position brikken skal placeres i
    col_list = [row[col] for row in board_state] #Laver den valgte kollone til en liste
    count = 0 #Tæller
    for i in col_list: #Loop'er igennem hver 'slot' i kollonen
        if i == 0: #Hvis pladsen er tom, så retuner værdien
            return count
        count = count + 1

def check_for_win (board_state, player_id): #Tjekker om den aktuelle spiller har vundet
    brikker_på_stribe = 0
    for row in range(len(board_state)): #Vandret win-condition
        for col in range(len(board_state[0])):
            if board_state[row][col] == player_id:
                brikker_på_stribe = brikker_på_stribe + 1
            elif brikker_på_stribe >= 4:
                return True
            else:
                brikker_på_stribe = 0 #Hvis der ikke er 4 på stribe i streg, så fortsæt tælleren fra nul

    for col in range(len(board_state[0])): #Lodret win-condition
        for row in range(len(board_state)):
            if board_state[row][col] == player_id:
                brikker_på_stribe = brikker_på_stribe + 1
            elif brikker_på_stribe >= 4:
                return True
            else:
                brikker_på_stribe = 0

    for row in range(len(board_state)): #Skrå win-condition
        for col in range(len(board_state[0])):
            try:
                if board_state[row][col] == player_id and board_state[row + 1][col + 1] == player_id and board_state[row + 2][col + 2] == player_id and board_state[row + 3][col + 3] == player_id:
                    return True
                elif board_state[row][col] == player_id and board_state[row - 1][col + 1] == player_id and board_state[row - 2][col + 2] == player_id and board_state[row - 3][col + 3] == player_id:
                    return True
                else:
                    continue
            except:
                continue

def game_loop():
    board_state = [[0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0],
                   [0,0,0,0,0,0,0]]
    player_id = 1
    for row in reversed(range(len(board_state))):
        print(board_state[row])
    print(f"Vælg hvilken kollone du vil spille i (1-{len(board_state[0])})")
    while True:
        user_inp = int(input(f"Spiller {player_id}: ")) - 1

        if not user_inp in range(len(board_state[0])):
            print("Du kan ikke placere der prøv venligst igen.")
            continue

        if not brik_placering(board_state, user_inp) in range(len(board_state)):
            print("Kollone er fyldt, prøv igen!")
            continue

        board_state[brik_placering(board_state, user_inp)][user_inp] = player_id

        for row in reversed(range(len(board_state))):
            print(board_state[row])

        if check_for_win(board_state, player_id) == True:
            print(f"Spiller {player_id} har vundet!")
            break

        if player_id == 1:
            player_id = 2
        else:
            player_id = 1

game_loop()
